(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,65857,e=>{"use strict";var t=e.i(43476),s=e.i(71645),l=e.i(71935);e.i(51718);var a=e.i(18357),r=e.i(151);e.i(36180);var d=e.i(98925);function i(){let{user:e}=(0,l.useAuth)(),[i,o]=(0,s.useState)({type:"",content:""}),[n,c]=(0,s.useState)({street:"",city:"",zipCode:""}),[u,m]=(0,s.useState)(!0);(0,s.useEffect)(()=>{e&&(async()=>{try{let t=await (0,d.getDoc)((0,d.doc)(r.db,"users",e.uid));if(t.exists()){let e=t.data();e.address&&c({street:e.address.street||"",city:e.address.city||"",zipCode:e.address.zipCode||""})}}catch(e){console.error("Error loading address:",e),o({type:"error",content:"Failed to load address."})}finally{m(!1)}})()},[e]);let x=async t=>{if(t.preventDefault(),o({type:"",content:""}),!r.auth.currentUser||!e)return;let s=t.target.displayName.value,l=t.target.photoURL.value,i={street:t.target.street.value,city:t.target.city.value,zipCode:t.target.zipCode.value};try{await (0,a.updateProfile)(r.auth.currentUser,{displayName:s,photoURL:l}),await (0,d.setDoc)((0,d.doc)(r.db,"users",e.uid),{address:i},{merge:!0}),c(i),o({type:"success",content:"Profile updated!"})}catch(e){console.error(e),o({type:"error",content:e.message})}};return e?(0,t.jsxs)("div",{className:"max-w-2xl mx-auto bg-white p-8 rounded-xl shadow border border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-6 mb-8",children:[(0,t.jsx)("div",{className:"w-20 h-20 rounded-full bg-gray-200 overflow-hidden flex-shrink-0 border-2 border-violet-100",children:e.photoURL?(0,t.jsx)("img",{src:e.photoURL,alt:"Avatar",className:"w-full h-full object-cover"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center text-2xl text-gray-400",children:"?"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Your profile"}),(0,t.jsx)("p",{className:"text-gray-500",children:e.email})]})]}),i.content&&(0,t.jsx)("div",{className:`p-4 mb-6 rounded-lg ${"error"===i.type?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:i.content}),(0,t.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (read-only)"}),(0,t.jsx)("input",{type:"email",defaultValue:e.email,readOnly:!0,className:"w-full px-4 py-2 border bg-gray-100 text-gray-500 rounded-lg cursor-not-allowed"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display name"}),(0,t.jsx)("input",{type:"text",name:"displayName",defaultValue:e.displayName||"",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-violet-500 outline-none"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Profile picture URL"}),(0,t.jsx)("input",{type:"url",name:"photoURL",defaultValue:e.photoURL||"",placeholder:"https://example.com/avatar.jpg",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-violet-500 outline-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street"}),(0,t.jsx)("input",{type:"text",name:"street",value:n.street,onChange:e=>c(t=>({...t,street:e.target.value})),disabled:u,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-violet-500 outline-none disabled:bg-gray-100"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),(0,t.jsx)("input",{type:"text",name:"city",value:n.city,onChange:e=>c(t=>({...t,city:e.target.value})),disabled:u,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-violet-500 outline-none disabled:bg-gray-100"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ZIP code"}),(0,t.jsx)("input",{type:"text",name:"zipCode",value:n.zipCode,onChange:e=>c(t=>({...t,zipCode:e.target.value})),disabled:u,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-violet-500 outline-none disabled:bg-gray-100"})]})]}),(0,t.jsx)("div",{className:"flex justify-end gap-4",children:(0,t.jsx)("button",{type:"submit",className:"px-6 py-2 bg-violet-600 hover:bg-violet-700 text-white font-semibold rounded-lg shadow transition",disabled:u,children:"Save changes"})})]})]}):null}e.s(["default",()=>i])}]);