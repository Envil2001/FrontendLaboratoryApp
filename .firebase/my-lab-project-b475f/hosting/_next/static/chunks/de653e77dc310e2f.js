(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,40079,e=>{"use strict";var r=e.i(43476),s=e.i(71645);e.i(51718);var t=e.i(18357),a=e.i(151),o=e.i(71935);function l(){let{user:e}=(0,o.useAuth)(),[l,n]=(0,s.useState)(""),[i,d]=(0,s.useState)(""),[u,c]=(0,s.useState)(""),[g,m]=(0,s.useState)({type:"",message:""}),[p,h]=(0,s.useState)(!1);if(!e)return null;let b=async e=>{if(e.preventDefault(),m({type:"",message:""}),i!==u)return void m({type:"error",message:"New passwords must be identical."});if(i.length<6)return void m({type:"error",message:"New password must be at least 6 characters long."});let r=a.auth.currentUser;if(!r||!r.email)return void m({type:"error",message:"No logged-in user."});h(!0);try{let e=t.EmailAuthProvider.credential(r.email,l);await (0,t.reauthenticateWithCredential)(r,e),await (0,t.updatePassword)(r,i),m({type:"success",message:"Password has been changed."}),n(""),d(""),c("")}catch(r){console.error(r);let e="Failed to change password.";"auth/wrong-password"===r.code?e="Current password is incorrect.":"auth/weak-password"===r.code?e="New password is too weak (min. 6 characters).":"auth/requires-recent-login"===r.code&&(e="Please log in again and try once more."),m({type:"error",message:e})}finally{h(!1)}};return(0,r.jsxs)("div",{className:"max-w-md mx-auto bg-white p-8 rounded-xl shadow border border-gray-200",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Change password"}),g.message&&(0,r.jsx)("div",{className:`mb-4 p-3 rounded border text-sm ${"error"===g.type?"bg-red-50 border-red-200 text-red-700":"bg-green-50 border-green-200 text-green-700"}`,children:g.message}),(0,r.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current password"}),(0,r.jsx)("input",{type:"password",value:l,onChange:e=>n(e.target.value),required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-violet-500 outline-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New password"}),(0,r.jsx)("input",{type:"password",value:i,onChange:e=>d(e.target.value),required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-violet-500 outline-none",placeholder:"min. 6 characters"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Repeat new password"}),(0,r.jsx)("input",{type:"password",value:u,onChange:e=>c(e.target.value),required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-violet-500 outline-none"})]}),(0,r.jsx)("button",{type:"submit",disabled:p,className:"w-full py-2 px-4 bg-violet-600 hover:bg-violet-700 text-white font-semibold rounded-lg shadow transition disabled:opacity-60",children:p?"Saving...":"Change password"})]})]})}e.s(["default",()=>l])}]);